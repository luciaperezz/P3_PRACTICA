<html>
    <head>
        <title>Calculadora de CORE</title>
        <meta charset="UTF-8">
    </head>

    <script type="text/javascript">
        //OPERACIONES UTILES PARA TOMAR EL VALOR PASADO Y USARLO
        const getInputValue = () => {
            return Number(document.getElementById("pantalla").value);
       };
       const setInputValue = (valor) => {
            document.getElementById("pantalla").value = valor;
        };

        //OPERACION PARA VACIAR LA CAJA DE NUMEROS Y PODER HACER OPERACIONES BINARIAS
        const vaciarInput = () => {
            document.getElementById("pantalla").value = "";
        };

        //OPERACIONES UNITARIAS
        const sq = () => {
            if(!validar()){
                return;
            }
            let inputValue = getInputValue();
            setInputValue(inputValue*inputValue);
            rellenarInfo();
        };

        const fact = () => {
            if(!validar()){
                return;
            }
            let inputValue = getInputValue();
            let resultado = 1;
            for (let index = inputValue; index > 1; index--){
                resultado *= index;
            }
            setInputValue(resultado);
            rellenarInfo();
        };

        const sqr = () => {
            if(!validar()){
                return;
            }
            let inputValue = getInputValue();
            let resultado = Math.sqrt(inputValue);
            setInputValue(resultado);
            rellenarInfo();
        };

        //OPERACIONES BINARIAS
        let acumulador = 0;
        let operador = "";
        
        const acumula = n => {
            switch (operador){
                case "":
                    acumulador = n;
                    break;
                case "+":
                    acumulador += n;
                    break;
                case "-": 
                    acumulador -= n;
                    break;
                case "*":
                    acumulador *= n;
                    break;
                case "/":
                    acumulador /= n;
                    break;
            }
        };
        //SUMA
        const add = () => {
            if(!validar()){
                return;
            }
            acumula(getInputValue());
            operador = "+";
            vaciarInput();
            rellenarInfo();

        };
        //IGUAL
        const eq = () => {
            if(!validar()){
                return;
            }
            acumula(getInputValue());
            operador = "=";
            vaciarInput();
            setInputValue(acumulador);
            rellenarInfo();
        };

        //RESTA
        const sub = () => {
            if(!validar()){
                return;
            }
            acumula(getInputValue());
            operador = "-";
            vaciarInput();
            rellenarInfo();
        };
        //MULTIPLICACION
        const mul = ()=> {
            if(!validar()){
                return;
            }
            acumula(getInputValue());
            operador = "*";
            vaciarInput();
            rellenarInfo();
        };
        //DIVISION
        const div = () => {
            if(!validar()){
                return;
            }
            acumula(getInputValue());
            operador = "/";
            vaciarInput();
            rellenarInfo();
        };

        const rellenarInfo = () => {
            const resultadoInput = getInputValue();
            let mensaje = "";

            //if (resultadoInput ==="Error") {
            //        mensaje = "ERROR";
            //    }
            if (Number.isNaN(resultadoInput)) {
                mensaje = "ERROR";
            }
            else {
                if (resultadoInput < 100){
                    mensaje = "Info: El resultado es menor que 100";
                }
                else if (resultadoInput <= 200){
                    mensaje = "Info: El resultado está entre 100 y 200";
                }
                else {
                    mensaje = "Info: El resultado es superior a 200";
                }
            }
            document.getElementById("info").innerHTML = mensaje;
            }

            const validar = () => {
                if(Number.isNaN(getInputValue())){
                    setInputValue("Error");
                    return false;
                }
                return true;
        };

        const clearScreen= () => {
            document.getElementById("pantalla").value = 0;
        };
        const clearAll = () => {
            clearScreen();
            acumulador = 0;
        };

        const onload = () => {
            document.getElementById("cuadrado").addEventListener("click",sq);
            document.getElementById("factorial").addEventListener("click",fact);
            document.getElementById("raiz").addEventListener("click",sqr);
            document.getElementById("suma").addEventListener("click",add);
            document.getElementById("igual").addEventListener("click",eq);
            document.getElementById("resta").addEventListener("click",sub);
            document.getElementById("multiplicacion").addEventListener("click",mul);
            document.getElementById("division").addEventListener("click",div);
            document.getElementById("clearScreen").addEventListener("click",clearScreen);
            document.getElementById("clearAll").addEventListener("click",clearAll);
 
            //Que se vacie la caja del input al darle clik
            document.getElementById("inputTexto").addEventListener("click", vaciarInput);
        };
        
        window.onload =onload;
    </script>



    <body>
        <h1 class="cabecera">Calculadora de CORE</h1>
        <div id="inputTexto">
            <label for="pantalla">Número</label>
            <input type="text" id="pantalla">
        </div>

        <h2 id="info" class="grande">Info sobre el número</h2>
        
        <div id="opUnitarias">
            <h3>Operaciones unitarias</h3>
            <button id="cuadrado">x<sup>2</sup></button> 
            <button id="factorial">x!</button>
            <button id="raiz">&#8730 x</button>
        </div>
        <div id="opBinarias">
            <h4>Operaciones Binarias</h4>
            <button id="suma"> + </button>
            <button id="resta"> - </button>
            <button id="multiplicacion"> * </button>
            <button id="division"> / </button>
            <button id="igual"> = </button>
        </div>

        <h5 id="limpieza">Limpieza</h5>
        <div>
            <button id="clearScreen"> C </button>
            <button id="clearAll"> AC </button>
        </div>
    </body>
   </html>

